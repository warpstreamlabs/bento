---
title: bluesky_jetstream
slug: bluesky_jetstream
type: input
status: beta
categories: ["Services","Social"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution BETA
This component is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with the component is found.
:::
Connects to the Bluesky Jetstream firehose to consume real-time events from the AT Protocol network.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yml
# Common config fields, showing default values
input:
  label: ""
  bluesky_jetstream:
    collections: []
    dids: []
    auto_replay_nacks: true
```

</TabItem>
<TabItem value="advanced">

```yml
# All config fields, showing default values
input:
  label: ""
  bluesky_jetstream:
    endpoint: ""
    endpoints: []
    collections: []
    dids: []
    compress: false
    buffer_size: 1024
    read_limit_bytes: 0
    ping_interval: 30s
    read_timeout: 0s
    cache: ""
    cache_key: bluesky_jetstream_cursor
    cursor_buffer_us: 1000000
    cursor_commit_interval: 1s
    max_in_flight: 0
    auto_replay_nacks: true
```

</TabItem>
</Tabs>

This input connects to [Bluesky's Jetstream](https://docs.bsky.app/blog/jetstream) service, which provides a simplified,
JSON-based stream of events from the AT Protocol network. Events include posts, likes, follows, reposts, and more.

Jetstream is a lightweight alternative to the full AT Protocol firehose, making it easier to build applications that
consume real-time Bluesky data without dealing with complex CBOR/CAR binary formats.

### Event Types

The stream includes three types of events:

- **commit**: Repository changes (posts, likes, follows, blocks, etc.)
- **identity**: Handle and identity changes
- **account**: Account status changes (active, suspended, deleted)

### Custom PDS Support

While the default configuration connects to Bluesky's public Jetstream servers, you can point this input to any
AT Protocol PDS (Personal Data Server) that exposes a Jetstream-compatible endpoint. This enables:

- Reading from self-hosted PDS instances
- Connecting to alternative AT Protocol networks
- Testing against local development servers

### Cursor-Based Resumption

The input supports cursor-based resumption via an optional cache resource. When configured, the cursor (Unix
microsecond timestamp) of the last processed event is stored in the cache. On restart, the stream resumes
from that point, ensuring no events are missed.

### High Volume Tuning

For high throughput workloads consider enabling compress, setting a larger buffer_size, and using
cursor_commit_interval to reduce cache write amplification. You can also tune max_in_flight, ping_interval,
and read_timeout for additional control.


## Fields

### `endpoint`

The Jetstream WebSocket endpoint URL. Leave empty to use the default public endpoints with automatic failover.


Type: `string`  
Default: `""`  

```yml
# Examples

endpoint: wss://jetstream1.us-east.bsky.network/subscribe

endpoint: wss://my-pds.example.com/subscribe
```

### `endpoints`

A list of Jetstream WebSocket endpoints to try in order. Ignored when `endpoint` is set. Leave empty to use the default public endpoints.


Type: `array`  
Default: `[]`  

```yml
# Examples

endpoints:
  - wss://jetstream1.us-east.bsky.network/subscribe
  - wss://jetstream2.us-east.bsky.network/subscribe
```

### `collections`

Filter events by collection NSID (Namespaced Identifier). Supports wildcards like `app.bsky.feed.*`. Leave empty to receive all collections.


Type: `array`  
Default: `[]`  

```yml
# Examples

collections:
  - app.bsky.feed.post

collections:
  - app.bsky.feed.post
  - app.bsky.feed.like
  - app.bsky.graph.follow

collections:
  - app.bsky.feed.*
```

### `dids`

Filter events by repository DID (Decentralized Identifier). Maximum 10,000 DIDs. Leave empty to receive events from all users.


Type: `array`  
Default: `[]`  

```yml
# Examples

dids:
  - did:plc:z72i7hdynmk6r22z27h6tvur
```

### `compress`

Enable zstd compression for reduced bandwidth. Recommended for high-volume streams.


Type: `bool`  
Default: `false`  

### `buffer_size`

Size of the internal message buffer. Higher values can absorb bursts but use more memory.


Type: `int`  
Default: `1024`  

### `read_limit_bytes`

Maximum size of a WebSocket message in bytes. Set to 0 for no limit.


Type: `int`  
Default: `0`  

### `ping_interval`

Interval for sending WebSocket ping frames to keep connections alive. Set to 0 to disable.


Type: `string`  
Default: `"30s"`  

### `read_timeout`

Read deadline for WebSocket messages. If set to 0 and `ping_interval` is enabled, a default of 2x `ping_interval` is used.


Type: `string`  
Default: `"0s"`  

### `cache`

A cache resource for storing the cursor position. This enables resumption from the last processed event after restarts.


Type: `string`  
Default: `""`  

### `cache_key`

The key used to store the cursor in the cache.


Type: `string`  
Default: `"bluesky_jetstream_cursor"`  

### `cursor_buffer_us`

When resuming, subtract this many microseconds from the stored cursor to ensure no events are missed due to timing issues. Default is 1 second (1,000,000 microseconds).


Type: `int`  
Default: `1000000`  

### `cursor_commit_interval`

Minimum interval between cursor commits to the cache. Set to 0 to commit every acknowledged message.


Type: `string`  
Default: `"1s"`  

### `max_in_flight`

Optionally sets a limit on the number of messages that can be flowing through a Bento stream pending acknowledgment from the input at any given time. Once a message has been either acknowledged or rejected (nacked) it is no longer considered pending. If the input produces logical batches then each batch is considered a single count against the maximum. **WARNING**: Batching policies at the output level will stall if this field limits the number of messages below the batching threshold. Zero (default) or lower implies no limit.


Type: `int`  
Default: `0`  

### `auto_replay_nacks`

Whether messages that are rejected (nacked) at the output level should be automatically replayed indefinitely, eventually resulting in back pressure if the cause of the rejections is persistent. If set to `false` these messages will instead be deleted. Disabling auto replays can greatly improve memory efficiency of high throughput streams as the original shape of the data can be discarded immediately upon consumption and mutation.


Type: `bool`  
Default: `true`  


